<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Glitch To-Do App</title>

  <style>
 
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at top, #1f2933, #020617);
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }


    .menu {
      position: relative;
    }

    .testClass {
      position: relative;
      width: 90vw;
      max-width: 480px;
      padding: 1vmin 0 2vmin;
      background-color: transparent;
      overflow: visible;
    }

    .menuInner {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      width: 100%;
      z-index: 1;
      background-color:black;
      clip-path: polygon(3% 13%, 97% 12%, 96% 91%, 4% 86%);
      -webkit-clip-path: polygon(3% 13%, 97% 12%, 96% 91%, 4% 86%);
    }

    .menuText {
      position: relative;
      z-index: 3;
      padding: 2.4vmin 3vmin 1vmin;
      font-family: "微软雅黑", system-ui, sans-serif;
      font-weight: bold;
      font-size: 4vmin;
      white-space: nowrap;
      color: white;
    }

    .menuText:hover {
      cursor: pointer;
      color: white;
    }

    .menuOuter {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      width: 100%;
      z-index: 0;
      background-color: white;
      box-shadow: 3px 3px 9px #222222;
      clip-path: polygon(3% 4%, 95% 20%, 95% 85%, 5% 95%);
      -webkit-clip-path: polygon(3% 4%, 95% 20%, 95% 85%, 5% 95%);
    }

   
    .menuText:hover ~ .menuInner {
      background-color: red;
      animation: 0.75s menuInnerAnime ease-in-out infinite;
      -webkit-animation: 0.75s menuInnerAnime ease-in-out infinite;
    }

    .menuText:hover ~ .menuOuter {
      background-color: black;
      box-shadow: none;
      animation: 1s menuOuterAnime ease-in-out infinite;
      -webkit-animation: 1s menuOuterAnime ease-in-out infinite;
    }

    
    .testClass:hover .menuInner {
      background-color: red;
      animation: 0.75s menuInnerAnime ease-in-out infinite;
      -webkit-animation: 0.75s menuInnerAnime ease-in-out infinite;
    }

    .testClass:hover .menuOuter {
      background-color: black;
      box-shadow: none;
      animation: 1s menuOuterAnime ease-in-out infinite;
      -webkit-animation: 1s menuOuterAnime ease-in-out infinite;
    }

    @keyframes menuInnerAnime{
      0%{
        clip-path: polygon(12% 25%, 80% 10%, 100% 85%, 6% 85%);
      }
      30%{
        clip-path: polygon(4% 0%, 90% 14%, 90% 100%, 20% 75%);
      }
      50%{
        clip-path: polygon(0% 24%, 88% 0%, 80% 80%, 0% 100%);
      }
      75%{
        clip-path: polygon(16% 2%, 100% 7%,  91% 91%, 17% 80%);
      }
      100%{
        clip-path: polygon(12% 25%, 80% 10%, 100% 85%, 6% 85%);
      }
    }
    @-webkit-keyframes menuInnerAnime{
      0%{
        -webkit-clip-path: polygon(12% 25%, 80% 10%, 100% 85%, 6% 85%);
      }
      30%{
        -webkit-clip-path: polygon(4% 0%, 90% 14%, 90% 100%, 20% 75%);
      }
      50%{
        -webkit-clip-path: polygon(0% 24%, 88% 0%, 80% 80%, 0% 100%);
      }
      75%{
        -webkit-clip-path: polygon(16% 2%, 100% 7%, 91% 91%, 17% 80%);
      }
      100%{
        -webkit-clip-path: polygon(12% 25%, 80% 10%, 100% 85%, 6% 85%);
      }
    }

    @keyframes menuOuterAnime {
      0%{
        clip-path: polygon(3% 4%, 95% 20%, 95% 85%, 5% 95%);
      }
      30%{
        clip-path: polygon(0% 7%, 90% 0%, 100% 90%, 3% 100%);
      }
      50%{
        clip-path: polygon(4% 0%, 97% 9%, 90% 95%, 0% 93%);
      }
      75%{
        clip-path: polygon(7% 2%, 92% 0%, 91% 91%, 7% 99%);
      }
      100%{
        clip-path: polygon(3% 4%, 95% 20%, 95% 85%, 5% 95%);
      }
    }
    @-webkit-keyframes menuOuterAnime {
      0%{
        -webkit-clip-path: polygon(3% 4%, 95% 20%, 95% 85%, 5% 95%);
      }
      30%{
        -webkit-clip-path: polygon(0% 7%, 90% 0%, 100% 90%, 3% 100%);
      }
      50%{
        -webkit-clip-path: polygon(4% 0%, 97% 9%, 90% 95%, 0% 93%);
      }
      75%{
        -webkit-clip-path: polygon(7% 2%, 92% 0%, 91% 91%, 7% 99%);
      }
      100%{
        -webkit-clip-path: polygon(3% 4%, 95% 20%, 95% 85%, 5% 95%);
      }
    }

 

    .app {
      position: relative;
      z-index: 3; 
      padding: 0 3vmin 3vmin;
      color: #e5e7eb;
    }

    .app-title {
      font-size: 1.4rem;
      margin-bottom: 12px;
      letter-spacing: 0.05em;
    }

    .todo-form {
      display: flex;
      gap: 8px;
      margin-bottom: 12px;
    }

    #todo-input {
      flex: 1;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.8);
      background: #020617;
      color: #e5e7eb;
      outline: none;
      font-size: 0.9rem;
    }

    #todo-input::placeholder {
      color: #6b7280;
    }

    .todo-form button {
      padding: 8px 14px;
      border-radius: 999px;
      border: none;
      background: #22c55e;
      color: #020617;
      font-weight: 600;
      cursor: pointer;
    }

    .todo-controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
      font-size: 0.8rem;
      color: #9ca3af;
    }

    .filters {
      display: flex;
      gap: 4px;
    }

    .filter-btn {
      border-radius: 999px;
      border: none;
      padding: 3px 8px;
      font-size: 0.7rem;
      cursor: pointer;
      background: transparent;
      color: #9ca3af;
    }

    .filter-btn.active {
      background: rgba(148, 163, 184, 0.3);
      color: #e5e7eb;
    }

    .todo-list {
      list-style: none;
      max-height: 220px;
      overflow-y: auto;
      padding-right: 4px;
      margin-bottom: 8px;
    }

    .todo-item {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 6px 8px;
      margin-bottom: 4px;
      border-radius: 8px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(55, 65, 81, 0.9);
    }

    .todo-item.completed {
      opacity: 0.7;
    }

    .todo-checkbox {
      width: 16px;
      height: 16px;
      cursor: pointer;
    }

    .todo-text {
      flex: 1;
      font-size: 0.9rem;
    }

    .todo-item.completed .todo-text {
      text-decoration: line-through;
      color: #6b7280;
    }

    .todo-delete {
      border: none;
      background: transparent;
      color: #f97373;
      cursor: pointer;
      font-size: 0.9rem;
      padding: 0 4px;
    }

    .clear-btn {
      width: 100%;
      border-radius: 999px;
      border: 1px dashed rgba(148, 163, 184, 0.7);
      padding: 6px 8px;
      font-size: 0.8rem;
      background: transparent;
      color: #9ca3af;
      cursor: pointer;
    }

    .footer {
      margin-top: 8px;
      font-size: 0.7rem;
      color: #9ca3af;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="menu">
    <div class="testClass">
      <div class="menuText">Minimal To-Do</div>
      <div class="menuInner"></div>
      <div class="menuOuter"></div>

      <main class="app">
        <form id="todo-form" class="todo-form">
          <input
            type="text"
            id="todo-input"
            placeholder="What do you need to do?"
            autocomplete="off"
          />
          <button type="submit">Add</button>
        </form>

        <section class="todo-controls">
          <span id="todo-count">0 tasks</span>

          <div class="filters">
            <button data-filter="all" class="filter-btn active">All</button>
            <button data-filter="active" class="filter-btn">Active</button>
            <button data-filter="completed" class="filter-btn">Completed</button>
          </div>
        </section>

        <ul id="todo-list" class="todo-list"></ul>

        <button id="clear-completed" class="clear-btn">
          Clear completed
        </button>

        <div class="footer">
          Glitch UI + Vanilla JS To-Do
        </div>
      </main>
    </div>
  </div>

  <script>
    // Minimal To-Do App logic

    const todoForm = document.getElementById("todo-form");
    const todoInput = document.getElementById("todo-input");
    const todoList = document.getElementById("todo-list");
    const todoCount = document.getElementById("todo-count");
    const filterButtons = document.querySelectorAll(".filter-btn");
    const clearCompletedBtn = document.getElementById("clear-completed");

    let todos = [];
    let currentFilter = "all";

    window.addEventListener("DOMContentLoaded", () => {
      const saved = localStorage.getItem("minimal-js-todo");
      if (saved) {
        todos = JSON.parse(saved);
      }
      renderTodos();
    });

    todoForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const text = todoInput.value.trim();
      if (!text) return;

      todos.push({
        id: Date.now().toString(),
        text,
        completed: false,
      });

      todoInput.value = "";
      saveAndRender();
    });

    todoList.addEventListener("click", (e) => {
      const li = e.target.closest(".todo-item");
      if (!li) return;

      const id = li.dataset.id;

      if (e.target.classList.contains("todo-checkbox")) {
        toggleTodo(id);
      }

      if (e.target.classList.contains("todo-delete")) {
        deleteTodo(id);
      }
    });

    filterButtons.forEach((btn) => {
      btn.addEventListener("click", () => {
        filterButtons.forEach((b) => b.classList.remove("active"));
        btn.classList.add("active");
        currentFilter = btn.dataset.filter;
        renderTodos();
      });
    });

    clearCompletedBtn.addEventListener("click", () => {
      todos = todos.filter((t) => !t.completed);
      saveAndRender();
    });

    function toggleTodo(id) {
      todos = todos.map((todo) =>
        todo.id === id ? { ...todo, completed: !todo.completed } : todo
      );
      saveAndRender();
    }

    function deleteTodo(id) {
      todos = todos.filter((todo) => todo.id !== id);
      saveAndRender();
    }

    function getFilteredTodos() {
      if (currentFilter === "active") {
        return todos.filter((t) => !t.completed);
      }
      if (currentFilter === "completed") {
        return todos.filter((t) => t.completed);
      }
      return todos;
    }

    function renderTodos() {
      todoList.innerHTML = "";

      const visibleTodos = getFilteredTodos();

      visibleTodos.forEach((todo) => {
        const li = document.createElement("li");
        li.className = "todo-item" + (todo.completed ? " completed" : "");
        li.dataset.id = todo.id;

        li.innerHTML = `
          <input 
            type="checkbox" 
            class="todo-checkbox" 
            ${todo.completed ? "checked" : ""} 
          />
          <span class="todo-text">${escapeHtml(todo.text)}</span>
          <button class="todo-delete">&times;</button>
        `;

        todoList.appendChild(li);
      });

      const countActive = todos.filter((t) => !t.completed).length;
      todoCount.textContent =
        todos.length === 0
          ? "No tasks"
          : `${countActive} active / ${todos.length} total`;
    }

    function saveAndRender() {
      localStorage.setItem("minimal-js-todo", JSON.stringify(todos));
      renderTodos();
    }

    function escapeHtml(str) {
      return str
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;");
    }
  </script>
</body>
</html>
